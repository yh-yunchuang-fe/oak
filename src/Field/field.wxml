<wxs src="WXS/base.wxs" module="Utils" />
<wxs module="Handles">
    function hanfleValue(isPlaintext, value) {
        console.log('hha', value)
        if(isPlaintext) {
            var dotReg = getRegExp("[\s\S]", "g");
            return value.replace(dotReg, '*')
        }
        return value
    }
    module.exports = {
        hanfleValue: hanfleValue,
    }
</wxs>
<block wx:if="{{type === 'textarea'}}">
    <!-- 自动换行 -->
    <view class="oak-field-textarea ext-class {{border ? 'border' : ''}}">
        <!-- left -->
        <view class="oak-field-textarea-label" wx:if="{{label || icon}}">
            <oak-icon
                ext-class="oak-field-textarea-icon"
                name="{{icon}}" 
                color="{{iconColor}}"
                size="{{iconSize}}"
            ></oak-icon>
            <text>{{label}}</text>
        </view>
        <!-- body -->
        <view class="oak-field-textarea-body">
            <textarea
                class="input-class"
                value="{{value}}"
                placeholder="{{placeholder}}"
                disabled="{{disabled}}"
                maxlength="{{maxlength}}"
                focus="{{focus}}"
                auto-height="{{autosize}}"
                fixed="{{fixed}}"
                cursor-spacing="{{cursorSpacing}}"
                cursor="{{cursor}}"
                selection-start="{{selectionStart}}"
                selection-end="{{selectionEnd}}"
                adjust-position="{{adjustPosition}}"
                hold-keyboard="{{holdKeyboard}}"
                bindfocus="focus"
                bindblur="blur"
                bindinput="change"
                bindconfirm="confirm"
                bindkeyboardheightchange="keyboardheightchange"
            ></textarea>
        </view>
        <!-- right -->
        <view class="oak-field-textarea-right">
            <oak-icon 
                wx:if="{{clearable && focused && value}}"
                ext-class="oak-field-clear"
                name="close-fill" 
                color="{{clearIconColor}}"
                size="34rpx"
                bindtap="clear" 
            ></oak-icon>
        </view>
    </view>
</block>
<block wx:elif="{{type === 'captcha-b'}}">
    <!-- input -->
    <view class="field-captcha-b ext-class">
        <input class="captcha-b-input input-class {{error ? 'error' : ''}}"
            value="{{value}}"
            type="{{type === 'password' ? 'text' : type}}"
            placeholder="{{placeholder}}"
            disabled="{{disabled}}"
            autosize="{{autosize}}"
            password="{{type === 'password' && seePasswordType === 0}}"
            placeholder-style="{{placeholderStyle}}"
            placeholder-class="input-placeholder"
            focus="{{focus}}"
            confirm-type="{{confirmType}}"
            confirm-hold="{{confirmHold}}"
            cursor="{{cursor}}"
            selection-start="{{selectionStart}}"
            selection-end="{{selectionEnd}}"
            adjust-position="{{adjustPosition}}"
            hold-keyboard="{{holdkeyboard}}"
            maxlength="{{maxlength}}"
            cursor-spacing="{{cursorSpacing}}"
            clearable="{{clearable}}"
            error="{{error}}"
            rules="{{rules}}"
            bindfocus="focus"
            bindinput="change"
            bindblur="blur"
            bindconfirm="confirm"
            bindkeyboardheightchange="keyboardheightchange"
        />
        <view class="captcha-line">
            <text wx:for="{{[0,1,2,3,4,5]}}" class="line active"/>
        </view>
    </view>
</block>
<block wx:else>
    <!-- input -->
    <view class="oak-field ext-class">
        <view class="title" wx:if="{{label}}">{{label}}</view>
        <input class="input-class input {{error ? 'error' : ''}}"
            value="{{value}}"
            type="{{type === 'password' ? 'text' : type}}"
            placeholder="{{placeholder}}"
            disabled="{{disabled}}"
            autosize="{{autosize}}"
            password="{{type === 'password' && seePasswordType === 0}}"
            placeholder-style="{{placeholderStyle}}"
            placeholder-class="input-placeholder"
            focus="{{focus}}"
            confirm-type="{{confirmType}}"
            confirm-hold="{{confirmHold}}"
            cursor="{{cursor}}"
            selection-start="{{selectionStart}}"
            selection-end="{{selectionEnd}}"
            adjust-position="{{adjustPosition}}"
            hold-keyboard="{{holdkeyboard}}"
            maxlength="{{maxlength}}"
            cursor-spacing="{{cursorSpacing}}"
            clearable="{{clearable}}"
            error="{{error}}"
            rules="{{rules}}"
            bindfocus="focus"
            bindinput="change"
            bindblur="blur"
            bindconfirm="confirm"
            bindkeyboardheightchange="keyboardheightchange"
        />
        <!-- 密码切换明文密文icon -->
        <oak-icon 
            wx:if="{{type === 'password' && selectPasswordVisiable}}"
            class="oak-field-clear"
            name="{{seePasswordType ? 'openeyes' : 'closeeyes'}}" 
            color="{{passwordIconColor}}"
            size="34rpx"
            bindtap="selectSeePasswordType" 
        ></oak-icon>
        <!-- 清空icon -->
        <oak-icon 
            wx:if="{{clearable&&focused&&value}}"
            class="oak-field-clear"
            name="close-facet" 
            color="{{clearIconColor}}"
            size="34rpx"
            bindtap="clear" 
        ></oak-icon>
        <view wx:if="{{type === 'captcha-a'}}" class="captcha {{countDownTime < 1 ? 'active' : ''}} captcha-class" catchtap="getCaptcha">{{countDownTime > 0 ? '重新发送(' + countDownTime + ')' : '发送验证码'}}</view>
        <slot />
    </view>
</block>